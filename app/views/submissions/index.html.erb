<p style="color: green"><%= notice %></p>

<h1>Submissions</h1>

<% if !current_user %>
  <div data-controller="ethereum">
    <div>You must be logged in to submit a new post.</div>
    <button data-action="click->ethereum#signin">Log in with Ethereum</button>
  </div>
<% else %>
  <p>
    <%= button_to "Log out", sign_out_path, method: :delete, data: {turbo: false} %>
  </p>
<% end %>

<p>
  Hello, <code><%= current_user.ethereum_addresses.first.address rescue 'anonymous' %></code>!
</p>

<div id="submissions">
  <% @submissions.each do |submission| %>
    <%= render submission %>
    <p>
      <%= link_to "Show this submission", submission if policy(submission).show? %>
    </p>
  <% end %>
</div>

<%= link_to "New submission", new_submission_path %>
